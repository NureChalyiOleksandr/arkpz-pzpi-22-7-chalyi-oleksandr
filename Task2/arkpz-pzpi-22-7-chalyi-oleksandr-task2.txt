           МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ
         ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ УНІВЕРСИТЕТ
                    РАДІОЕЛЕКТРОНІКИ




                  Кафедра «Програмна інженерія»




                                ЗВІТ
                     до лабораторної роботи №2
              з дисципліни «Аналіз та рефакторинг коду»
   на тему: «РОЗРОБКА БАЗИ ДАНИХ ДЛЯ СЕРВЕРНОЇ ЧАСТИНИ
   ПРОГРАМНОЇ СИСТЕМИ ТА ПРИКЛАДНОГО ПРОГРАМНОГО
                        ІНТЕРФЕЙСУ (API)»




Виконав:                                 Перевірив:
ст. гр. ПЗПІ-22-7                        ст. викладач кафедри ПІ
Чалий Олександр Олександрович            Сокорчук Ігор Петрович




                           Харків 2024
Завдання:
Розробити базу даних для серверної частини програмної системи та
прикладного программного інтерфейсу.
Хід роботи:
Посилання на відеозапис: https://youtu.be/-qc5uLDCiAc
   1. Розробка UML діаграми прецедентів
Так як система орієнтована на автоматичне функціонування, у якості
акторів було обрано Адміністратора який відповідає за налаштування
системи та Технічного спеціаліста який відповідає за моніторинг даних
для слідкування за несправностями. У якості прецедентів: перегляд та
управління даними системи, управління користувачами, зміна
налаштувань системи.
У результаті отримаємо таку діаграму(рис. 1):
                   Рисунок 1 - Діаграма прецедентів
  2. Розробка ER-діаграми для бази даних
Для бази даних обрано такі таблиці:
  ● Користувач(User)
  ● Вулична лампа(StreetLight)
  ● Сенсор(Sensor)
  ● Використання електроенергії(Energy Usage)
  ● Сповіщення(Alert)
  ● Журнал обслуговування(Maintenance Log)
  ● Дані погоди(Weather Data)




                  Рисунок 2 - ER-діаграма бази даних

   3. Розробка БД та діаграми її структури
Для створення бази даних була використана функціональність міграцій в
ASP .NET Core. Для цього були створені відповідні моделі таблиць та
контекст бази даних у коді програми.
У результаті створено базу даних(рис. 3).
                   Рисунок 3 - Діаграма структури БД

   4. Розробка функцій роботи з БД
Створено функції для роботи з базою даних за допомогою ORM та
реалізовані через репозиторії. Вони включають операції для створення,
оновлення, видалення та отримання даних із бази, використовуючи Entity
Framework та контекст бази даних.

   5. Розробка API та специфікації
Було створено API за допомогою контролерів в ASP .NET Core, які
обробляють HTTP запити (GET, POST, PUT, DELETE). Кожен контролер
відповідає за певну частину функціональності, наприклад, створення,
оновлення, видалення та отримання записів з бази даних.
Зокрема, розроблено контролери з такими запитами:
Alert:
   1. POST /api/Alert — Створення нового сповіщення.
   2. GET /api/Alert — Отримання всіх сповіщень.
   3. GET /api/Alert{id} — Отримання конкретного сповіщення.
   4. PUT /api/Alert{id} — Редагування сповіщення.
   5. DELETE /api/Alert{id} — Видалення сповіщення.
Auth:
   1. POST /api/Auth/Register — Створення нового користувача.
   2. POST /api/Auth/Login — Вхід у систему(Отримання токену для
       авторизації).
EnergyUsage:
   1. POST /api/EnergyUsage — Створення нового запису про
       використання електроенергії.
   2. GET /api/EnergyUsage — Отримання всіх записів про використання
       електроенергії.
   3. GET /api/EnergyUsage{id} — Отримання конкретного запису про
       використання електроенергії.
   4. PUT /api/EnergyUsage{id} — Редагування запису про використання
       електроенергії.
   5. DELETE /api/EnergyUsage{id} — Видалення запису про
       використання електроенергії.
MaintenanceLogs:
   1. POST /api/MaintenanceLogs — Створення нового запису про
       обслуговування.
   2. GET /api/MaintenanceLogs — Отримання всіх записів про
       обслуговування.
   3. GET /api/MaintenanceLogs{id} — Отримання конкретного запису
       про обслуговування.
   4. PUT /api/MaintenanceLogs{id} — Редагування запису про
       обслуговування.
   5. DELETE /api/AMaintenanceLogslert{id} — Видалення запису про
       обслуговування.
Sensor:
   1. POST /api/Sensor — Створення нового сенсору.
   2. GET /api/Sensor — Отримання всіх сенсорів.
   3. GET /api/Sensor{id} — Отримання конкретного сенсору.
   4. PUT /api/Sensor{id} — Редагування сенсору.
   5. DELETE /api/Sensor{id} — Видалення сенсору.
Streetlight:
   1. POST /api/Streetlight — Створення нового вуличного ліхтаря.
   2. GET /api/Streetlight — Отримання всіх вуличних ліхтарів.
   3. GET /api/Streetlight{id} — Отримання конкретного вуличного
       ліхтаря.
   4. PUT /api/Streetlight{id} — Редагування вуличного ліхтаря.
   5. DELETE /api/Streetlight{id} — Видалення вуличного ліхтаря.
User:
   1. GET /api/User — Отримання всіх користувачів.
   2. GET /api/User{id} — Отримання конкретного користувача.
   3. PUT /api/User{id} — Редагування користувача.
   4. DELETE /api/User{id} — Видалення користувача.
WeatherData:
   1. POST /api/WeatherData — Створення нового запису про погоду.
   2. GET /api/WeatherData — Отримання всіх записів про погоду.
   3. GET /api/WeatherData{id} — Отримання конкретного запису про
       погоду.
   4. PUT /api/WeatherData{id} — Редагування запису про погоду.
   5. DELETE /api/WeatherData{id} — Видалення запису про погоду.
